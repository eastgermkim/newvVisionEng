show databases;
CREATE DATABASE newVisionEng;
use newVisionEng;


CREATE TABLE NV_NEWS(
	NEWSNUM BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	NEWSTITLE VARCHAR(1000) NOT NULL,
	NEWSSUBTITLE VARCHAR(1000),
	NEWSLINK VARCHAR(1000),
   	NEWSWRITER VARCHAR(1000) NOT NULL,
   	NEWSCONTENTS VARCHAR(4000),
   	NEWSDATE VARCHAR(1000),
   	NEWSWRITEDATE DATETIME
   );

CREATE TABLE NV_NEWS_FILE(
   SYSTEMNAME VARCHAR(255) primary key,
   ORGNAME VARCHAR(1000),
   NEWSNUM BIGINT,
   CONSTRAINT NEWSFILE_FK1 FOREIGN KEY(NEWSNUM) REFERENCES NV_NEWS(NEWSNUM) ON DELETE CASCADE
);

CREATE TABLE NV_NEWS_IMG(
   SYSTEMNAME VARCHAR(255) primary key,
   ORGNAME VARCHAR(1000),
   NEWSNUM BIGINT,
   CONSTRAINT NEWSIMG_FK1 FOREIGN KEY(NEWSNUM) REFERENCES NV_NEWS(NEWSNUM) ON DELETE SET NULL
);
  

  SELECT * FROM NV_NEWS;
  SELECT * FROM NV_NEWS_FILE;
  SELECT * FROM NV_NEWS_IMG;

  ALTER TABLE NV_NEWS AUTO_INCREMENT=6;
 
  INSERT INTO NV_NEWS(NEWSTITLE,NEWSSUBTITLE,NEWSLINK,NEWSWRITER,NEWSCONTENTS,NEWSDATE,NEWSWRITEDATE)
  (SELECT NEWSTITLE,NEWSSUBTITLE,NEWSLINK,NEWSWRITER,NEWSCONTENTS,NEWSDATE,NEWSWRITEDATE FROM NV_NEWS);
 
 
  DROP TABLE NV_NEWS;
  DROP TABLE NV_NEWS_FILE;
  DROP TABLE NV_NEWS_IMG;
  TRUNCATE TABLE NV_NEWS; 
  TRUNCATE TABLE NV_NEWS_FILE;
