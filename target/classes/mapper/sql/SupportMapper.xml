<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <!-- namespace는 Mapper 인터페이스와 같은 이름으로 해야 자동 병합 처리된다. -->
<mapper namespace="com.newvisioneng.mapper.SupportMapper">
	
	
	<insert id="insertNotice">
	<!-- NOTICENUM은 NULL로 삽입시에 자동으로 1 증가한 값으로 들어간다(auto_increment) -->
		INSERT INTO NV_NOTICE VALUES(NULL,#{noticeWriter},#{noticeTitle},#{noticeContents},now(),1)
	</insert>
	
	<!-- 파일첨부를 위해, 글을 등록하자마자 그 글의 NOTICENUM을 가져온다-->
	<select id="getNoticeNum" resultType="_long" parameterType="string">
		SELECT NOTICENUM FROM NV_NOTICE WHERE NOTICEWRITER=#{noticeWriter} ORDER BY NOTICENUM DESC
	</select>
	
	<!-- 파일등록 -->
	<insert id="insertNoticeFile" parameterType="hashmap">
        INSERT INTO NV_NOTICE_FILE VALUES
        (#{SYSTEMNAME},#{ORGNAME},#{BOARDNUM})
	</insert>
	
	<!-- 공지사항 글 조회 -->
	<select id="read" resultType="com.newvisioneng.domain.NoticeDTO">
		SELECT * FROM NV_NOTICE WHERE NOTICENUM=#{noticeNum}	
	</select>
	
	
</mapper>












